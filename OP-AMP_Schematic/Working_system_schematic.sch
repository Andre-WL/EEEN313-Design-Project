EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L pspice:OPAMP U1
U 1 1 6347C2F5
P 1900 1550
F 0 "U1" H 2000 1800 50  0000 L CNN
F 1 "OPAMP" H 2000 1700 50  0000 L CNN
F 2 "" H 1900 1550 50  0001 C CNN
F 3 "~" H 1900 1550 50  0001 C CNN
	1    1900 1550
	1    0    0    -1  
$EndComp
$Comp
L Device:R R2
U 1 1 6347D473
P 1200 1650
F 0 "R2" H 1270 1696 50  0000 L CNN
F 1 "10k" H 1270 1605 50  0000 L CNN
F 2 "" V 1130 1650 50  0001 C CNN
F 3 "~" H 1200 1650 50  0001 C CNN
	1    1200 1650
	1    0    0    -1  
$EndComp
$Comp
L Device:R R8
U 1 1 6347DDA2
P 4550 1700
F 0 "R8" V 4550 1700 50  0000 C CNN
F 1 "150" V 4650 1700 50  0000 C CNN
F 2 "" V 4480 1700 50  0001 C CNN
F 3 "~" H 4550 1700 50  0001 C CNN
	1    4550 1700
	0    1    1    0   
$EndComp
$Comp
L Device:R R9
U 1 1 6347DF3F
P 3100 3150
F 0 "R9" V 3100 3150 50  0000 C CNN
F 1 "10k" V 3200 3150 50  0000 C CNN
F 2 "" V 3030 3150 50  0001 C CNN
F 3 "~" H 3100 3150 50  0001 C CNN
	1    3100 3150
	0    1    1    0   
$EndComp
$Comp
L Device:R R11
U 1 1 6347E0C9
P 3100 3350
F 0 "R11" V 3100 3350 50  0000 C CNN
F 1 "10k" V 3200 3350 50  0000 C CNN
F 2 "" V 3030 3350 50  0001 C CNN
F 3 "~" H 3100 3350 50  0001 C CNN
	1    3100 3350
	0    1    1    0   
$EndComp
$Comp
L Device:R R10
U 1 1 6347E3BB
P 3350 2900
F 0 "R10" H 3420 2946 50  0000 L CNN
F 1 "10k" H 3420 2855 50  0000 L CNN
F 2 "" V 3280 2900 50  0001 C CNN
F 3 "~" H 3350 2900 50  0001 C CNN
	1    3350 2900
	1    0    0    -1  
$EndComp
$Comp
L Device:R R4
U 1 1 6347E552
P 1150 3300
F 0 "R4" H 1220 3346 50  0000 L CNN
F 1 "8.2k" H 1220 3255 50  0000 L CNN
F 2 "" V 1080 3300 50  0001 C CNN
F 3 "~" H 1150 3300 50  0001 C CNN
	1    1150 3300
	1    0    0    -1  
$EndComp
$Comp
L Device:R R3
U 1 1 6347E6F5
P 1150 2700
F 0 "R3" H 1220 2746 50  0000 L CNN
F 1 "8.2k" H 1220 2655 50  0000 L CNN
F 2 "" V 1080 2700 50  0001 C CNN
F 3 "~" H 1150 2700 50  0001 C CNN
	1    1150 2700
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 6347EB8A
P 1200 1250
F 0 "R1" H 1270 1296 50  0000 L CNN
F 1 "10k" H 1270 1205 50  0000 L CNN
F 2 "" V 1130 1250 50  0001 C CNN
F 3 "~" H 1200 1250 50  0001 C CNN
	1    1200 1250
	1    0    0    -1  
$EndComp
$Comp
L Device:R R12
U 1 1 6347F173
P 3700 3900
F 0 "R12" V 3700 3900 50  0000 C CNN
F 1 "10k" V 3800 3900 50  0000 C CNN
F 2 "" V 3630 3900 50  0001 C CNN
F 3 "~" H 3700 3900 50  0001 C CNN
	1    3700 3900
	0    1    1    0   
$EndComp
$Comp
L Device:R_POT RV1
U 1 1 634800F7
P 1150 3000
F 0 "RV1" H 1080 3046 50  0000 R CNN
F 1 "25k" H 1080 2955 50  0000 R CNN
F 2 "" H 1150 3000 50  0001 C CNN
F 3 "~" H 1150 3000 50  0001 C CNN
	1    1150 3000
	1    0    0    -1  
$EndComp
$Comp
L Device:R_POT RV2
U 1 1 63480C54
P 4400 1550
F 0 "RV2" V 4193 1550 50  0000 C CNN
F 1 "5k" V 4284 1550 50  0000 C CNN
F 2 "" H 4400 1550 50  0001 C CNN
F 3 "~" H 4400 1550 50  0001 C CNN
	1    4400 1550
	0    1    1    0   
$EndComp
Wire Wire Line
	1200 1400 1200 1450
Wire Wire Line
	1600 1450 1200 1450
Connection ~ 1200 1450
Wire Wire Line
	1200 1450 1200 1500
Wire Wire Line
	1600 1650 1600 2100
Wire Wire Line
	1600 2100 2200 2100
Wire Wire Line
	2200 2100 2200 1550
$Comp
L power:+9V #PWR?
U 1 1 634899F6
P 1800 1250
F 0 "#PWR?" H 1800 1100 50  0001 C CNN
F 1 "+9V" H 1815 1423 50  0000 C CNN
F 2 "" H 1800 1250 50  0001 C CNN
F 3 "" H 1800 1250 50  0001 C CNN
	1    1800 1250
	1    0    0    -1  
$EndComp
$Comp
L power:+9V #PWR?
U 1 1 6348C358
P 1200 1100
F 0 "#PWR?" H 1200 950 50  0001 C CNN
F 1 "+9V" H 1215 1273 50  0000 C CNN
F 2 "" H 1200 1100 50  0001 C CNN
F 3 "" H 1200 1100 50  0001 C CNN
	1    1200 1100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 6348C866
P 1800 1850
F 0 "#PWR?" H 1800 1600 50  0001 C CNN
F 1 "GND" H 1805 1677 50  0000 C CNN
F 2 "" H 1800 1850 50  0001 C CNN
F 3 "" H 1800 1850 50  0001 C CNN
	1    1800 1850
	1    0    0    -1  
$EndComp
$Comp
L pspice:OPAMP U2
U 1 1 6348EF3D
P 1850 3100
F 0 "U2" H 1950 3350 50  0000 L CNN
F 1 "OPAMP" H 1950 3250 50  0000 L CNN
F 2 "" H 1850 3100 50  0001 C CNN
F 3 "~" H 1850 3100 50  0001 C CNN
	1    1850 3100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 634905BE
P 1200 1800
F 0 "#PWR?" H 1200 1550 50  0001 C CNN
F 1 "GND" H 1205 1627 50  0000 C CNN
F 2 "" H 1200 1800 50  0001 C CNN
F 3 "" H 1200 1800 50  0001 C CNN
	1    1200 1800
	1    0    0    -1  
$EndComp
$Comp
L pspice:OPAMP U3
U 1 1 63494930
P 1900 4750
F 0 "U3" H 2000 5000 50  0000 L CNN
F 1 "OPAMP" H 2000 4900 50  0000 L CNN
F 2 "" H 1900 4750 50  0001 C CNN
F 3 "~" H 1900 4750 50  0001 C CNN
	1    1900 4750
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 63494A52
P 1200 4850
F 0 "R6" H 1270 4896 50  0000 L CNN
F 1 "120k" H 1270 4805 50  0000 L CNN
F 2 "" V 1130 4850 50  0001 C CNN
F 3 "~" H 1200 4850 50  0001 C CNN
	1    1200 4850
	1    0    0    -1  
$EndComp
$Comp
L Device:R R5
U 1 1 63494A5C
P 1200 4450
F 0 "R5" H 1270 4496 50  0000 L CNN
F 1 "39k" H 1270 4405 50  0000 L CNN
F 2 "" V 1130 4450 50  0001 C CNN
F 3 "~" H 1200 4450 50  0001 C CNN
	1    1200 4450
	1    0    0    -1  
$EndComp
Wire Wire Line
	1200 4600 1200 4650
Wire Wire Line
	1600 4650 1200 4650
Connection ~ 1200 4650
Wire Wire Line
	1200 4650 1200 4700
Wire Wire Line
	1600 4850 1600 5300
Wire Wire Line
	1600 5300 2200 5300
Wire Wire Line
	2200 5300 2200 4750
$Comp
L power:+9V #PWR?
U 1 1 63494A6D
P 1800 4450
F 0 "#PWR?" H 1800 4300 50  0001 C CNN
F 1 "+9V" H 1815 4623 50  0000 C CNN
F 2 "" H 1800 4450 50  0001 C CNN
F 3 "" H 1800 4450 50  0001 C CNN
	1    1800 4450
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 63494A81
P 1800 5050
F 0 "#PWR?" H 1800 4800 50  0001 C CNN
F 1 "GND" H 1805 4877 50  0000 C CNN
F 2 "" H 1800 5050 50  0001 C CNN
F 3 "" H 1800 5050 50  0001 C CNN
	1    1800 5050
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 63494A8B
P 1200 5000
F 0 "#PWR?" H 1200 4750 50  0001 C CNN
F 1 "GND" H 1205 4827 50  0000 C CNN
F 2 "" H 1200 5000 50  0001 C CNN
F 3 "" H 1200 5000 50  0001 C CNN
	1    1200 5000
	1    0    0    -1  
$EndComp
Text GLabel 1150 4150 0    50   Input ~ 0
Buck_out
Wire Wire Line
	1150 4150 1200 4150
Wire Wire Line
	1200 4150 1200 4300
Wire Wire Line
	1300 3000 1550 3000
Wire Wire Line
	1550 3200 1550 3700
Wire Wire Line
	1550 3700 2150 3700
Wire Wire Line
	2150 3700 2150 3100
$Comp
L power:GND #PWR?
U 1 1 634A3F28
P 1750 3400
F 0 "#PWR?" H 1750 3150 50  0001 C CNN
F 1 "GND" H 1755 3227 50  0000 C CNN
F 2 "" H 1750 3400 50  0001 C CNN
F 3 "" H 1750 3400 50  0001 C CNN
	1    1750 3400
	1    0    0    -1  
$EndComp
$Comp
L power:+9V #PWR?
U 1 1 634A42C4
P 1750 2800
F 0 "#PWR?" H 1750 2650 50  0001 C CNN
F 1 "+9V" H 1765 2973 50  0000 C CNN
F 2 "" H 1750 2800 50  0001 C CNN
F 3 "" H 1750 2800 50  0001 C CNN
	1    1750 2800
	1    0    0    -1  
$EndComp
Text GLabel 2200 1550 2    50   Input ~ 0
4.5V
Text GLabel 2200 4750 2    50   Input ~ 0
V_actual
Text GLabel 2400 3050 1    50   Input ~ 0
V_setpoint
$Comp
L power:+9V #PWR?
U 1 1 634A562D
P 1150 2550
F 0 "#PWR?" H 1150 2400 50  0001 C CNN
F 1 "+9V" H 1165 2723 50  0000 C CNN
F 2 "" H 1150 2550 50  0001 C CNN
F 3 "" H 1150 2550 50  0001 C CNN
	1    1150 2550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 634A599F
P 1150 3450
F 0 "#PWR?" H 1150 3200 50  0001 C CNN
F 1 "GND" H 1155 3277 50  0000 C CNN
F 2 "" H 1150 3450 50  0001 C CNN
F 3 "" H 1150 3450 50  0001 C CNN
	1    1150 3450
	1    0    0    -1  
$EndComp
$Comp
L pspice:OPAMP U6
U 1 1 634A9235
P 3700 3250
F 0 "U6" H 3800 3500 50  0000 L CNN
F 1 "OPAMP" H 3800 3400 50  0000 L CNN
F 2 "" H 3700 3250 50  0001 C CNN
F 3 "~" H 3700 3250 50  0001 C CNN
	1    3700 3250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 634C2125
P 3600 3550
F 0 "#PWR?" H 3600 3300 50  0001 C CNN
F 1 "GND" H 3605 3377 50  0000 C CNN
F 2 "" H 3600 3550 50  0001 C CNN
F 3 "" H 3600 3550 50  0001 C CNN
	1    3600 3550
	1    0    0    -1  
$EndComp
Wire Wire Line
	3400 3350 3400 3900
Wire Wire Line
	3400 3900 3550 3900
Wire Wire Line
	3850 3900 4000 3900
Wire Wire Line
	4000 3900 4000 3250
Wire Wire Line
	3250 3150 3350 3150
Wire Wire Line
	3350 3050 3350 3150
Connection ~ 3350 3150
Wire Wire Line
	3350 3150 3400 3150
Text GLabel 3400 2650 2    50   Input ~ 0
4.5V
Wire Wire Line
	3400 2650 3350 2650
Wire Wire Line
	3350 2650 3350 2750
Wire Wire Line
	3250 3350 3400 3350
Connection ~ 3400 3350
Text GLabel 2950 3350 0    50   Input ~ 0
V_actual
$Comp
L power:+9V #PWR?
U 1 1 634D2BAF
P 3600 2950
F 0 "#PWR?" H 3600 2800 50  0001 C CNN
F 1 "+9V" H 3615 3123 50  0000 C CNN
F 2 "" H 3600 2950 50  0001 C CNN
F 3 "" H 3600 2950 50  0001 C CNN
	1    3600 2950
	1    0    0    -1  
$EndComp
$Comp
L pspice:OPAMP U4
U 1 1 634D4A5B
P 3550 1550
F 0 "U4" H 3600 1850 50  0000 L CNN
F 1 "OPAMP" H 3550 1700 50  0000 L CNN
F 2 "" H 3550 1550 50  0001 C CNN
F 3 "~" H 3550 1550 50  0001 C CNN
	1    3550 1550
	1    0    0    -1  
$EndComp
$Comp
L pspice:OPAMP U5
U 1 1 634D4E44
P 5300 1600
F 0 "U5" H 5400 1850 50  0000 L CNN
F 1 "OPAMP" H 5400 1750 50  0000 L CNN
F 2 "" H 5300 1600 50  0001 C CNN
F 3 "~" H 5300 1600 50  0001 C CNN
	1    5300 1600
	1    0    0    -1  
$EndComp
NoConn ~ 4550 1550
Text GLabel 5000 1500 0    50   Input ~ 0
4.5V
Text GLabel 3250 1650 0    50   Input ~ 0
4.5V
Wire Wire Line
	4700 1700 4950 1700
$Comp
L Device:R R9
U 1 1 634E64FA
P 4600 900
F 0 "R9" V 4600 900 50  0000 C CNN
F 1 "8.2k" V 4700 900 50  0000 C CNN
F 2 "" V 4530 900 50  0001 C CNN
F 3 "~" H 4600 900 50  0001 C CNN
	1    4600 900 
	0    1    1    0   
$EndComp
$Comp
L Device:R R7
U 1 1 634EA032
P 4050 1200
F 0 "R7" H 4150 1300 50  0000 C CNN
F 1 "10k" H 4150 1200 50  0000 C CNN
F 2 "" V 3980 1200 50  0001 C CNN
F 3 "~" H 4050 1200 50  0001 C CNN
	1    4050 1200
	-1   0    0    1   
$EndComp
Connection ~ 4050 1550
Wire Wire Line
	4050 1550 4250 1550
Wire Wire Line
	3850 1550 4050 1550
$Comp
L power:+9V #PWR?
U 1 1 634F4BA9
P 3450 1250
F 0 "#PWR?" H 3450 1100 50  0001 C CNN
F 1 "+9V" H 3465 1423 50  0000 C CNN
F 2 "" H 3450 1250 50  0001 C CNN
F 3 "" H 3450 1250 50  0001 C CNN
	1    3450 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	3250 1450 3250 900 
Wire Wire Line
	3250 900  4050 900 
$Comp
L power:+9V #PWR?
U 1 1 634F5DDA
P 5200 1300
F 0 "#PWR?" H 5200 1150 50  0001 C CNN
F 1 "+9V" H 5215 1473 50  0000 C CNN
F 2 "" H 5200 1300 50  0001 C CNN
F 3 "" H 5200 1300 50  0001 C CNN
	1    5200 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 900  4050 1050
Wire Wire Line
	4050 900  4450 900 
Connection ~ 4050 900 
Wire Wire Line
	4750 900  5800 900 
Wire Wire Line
	5800 900  5800 1600
Wire Wire Line
	5800 1600 5600 1600
$Comp
L Device:C C1
U 1 1 634F946A
P 5450 2250
F 0 "C1" V 5200 2250 50  0000 C CNN
F 1 "10nF" V 5289 2250 50  0000 C CNN
F 2 "" H 5488 2100 50  0001 C CNN
F 3 "~" H 5450 2250 50  0001 C CNN
	1    5450 2250
	0    1    1    0   
$EndComp
Connection ~ 5800 1600
$Comp
L power:GND #PWR?
U 1 1 63500191
P 3450 1850
F 0 "#PWR?" H 3450 1600 50  0001 C CNN
F 1 "GND" H 3455 1677 50  0000 C CNN
F 2 "" H 3450 1850 50  0001 C CNN
F 3 "" H 3450 1850 50  0001 C CNN
	1    3450 1850
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 635007B4
P 5200 1900
F 0 "#PWR?" H 5200 1650 50  0001 C CNN
F 1 "GND" H 5205 1727 50  0000 C CNN
F 2 "" H 5200 1900 50  0001 C CNN
F 3 "" H 5200 1900 50  0001 C CNN
	1    5200 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	5800 2250 5600 2250
Wire Wire Line
	5800 1600 5800 2250
Wire Wire Line
	5300 2250 4950 2250
Wire Wire Line
	4950 2250 4950 1700
Connection ~ 4950 1700
Wire Wire Line
	4950 1700 5000 1700
$Comp
L pspice:OPAMP U7
U 1 1 6350F0DD
P 5550 3150
F 0 "U7" H 5650 3400 50  0000 L CNN
F 1 "OPAMP" H 5650 3300 50  0000 L CNN
F 2 "" H 5550 3150 50  0001 C CNN
F 3 "~" H 5550 3150 50  0001 C CNN
	1    5550 3150
	1    0    0    -1  
$EndComp
$Comp
L Device:R R14
U 1 1 6350F827
P 5450 3800
F 0 "R14" V 5450 3800 50  0000 C CNN
F 1 "820" V 5550 3800 50  0000 C CNN
F 2 "" V 5380 3800 50  0001 C CNN
F 3 "~" H 5450 3800 50  0001 C CNN
	1    5450 3800
	0    1    1    0   
$EndComp
$Comp
L Device:R R13
U 1 1 6351013B
P 4950 3250
F 0 "R13" V 4950 3250 50  0000 C CNN
F 1 "10k" V 5050 3250 50  0000 C CNN
F 2 "" V 4880 3250 50  0001 C CNN
F 3 "~" H 4950 3250 50  0001 C CNN
	1    4950 3250
	0    1    1    0   
$EndComp
Text GLabel 5250 3050 0    50   Input ~ 0
4.5V
$Comp
L Device:CP C2
U 1 1 63510E9D
P 5850 3500
F 0 "C2" H 5968 3546 50  0000 L CNN
F 1 "4uF" H 5968 3455 50  0000 L CNN
F 2 "" H 5888 3350 50  0001 C CNN
F 3 "~" H 5850 3500 50  0001 C CNN
	1    5850 3500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 635115F5
P 5450 3450
F 0 "#PWR?" H 5450 3200 50  0001 C CNN
F 1 "GND" H 5455 3277 50  0000 C CNN
F 2 "" H 5450 3450 50  0001 C CNN
F 3 "" H 5450 3450 50  0001 C CNN
	1    5450 3450
	1    0    0    -1  
$EndComp
$Comp
L power:+9V #PWR?
U 1 1 63513D33
P 5450 2850
F 0 "#PWR?" H 5450 2700 50  0001 C CNN
F 1 "+9V" H 5465 3023 50  0000 C CNN
F 2 "" H 5450 2850 50  0001 C CNN
F 3 "" H 5450 2850 50  0001 C CNN
	1    5450 2850
	1    0    0    -1  
$EndComp
Wire Wire Line
	5100 3250 5200 3250
Wire Wire Line
	5200 3250 5200 3800
Wire Wire Line
	5200 3800 5300 3800
Connection ~ 5200 3250
Wire Wire Line
	5200 3250 5250 3250
Wire Wire Line
	5600 3800 5850 3800
Wire Wire Line
	5850 3800 5850 3650
Wire Wire Line
	5850 3350 5850 3150
Text GLabel 4000 3250 2    50   Input ~ 0
V_err
Text GLabel 4800 3250 0    50   Input ~ 0
V_err
$Comp
L Comparator:LM319 U1
U 1 1 6353F19D
P 4850 4900
F 0 "U1" H 4850 5267 50  0000 C CNN
F 1 "LM319" H 4850 5176 50  0000 C CNN
F 2 "" H 4850 4900 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm319-n.pdf" H 4850 4900 50  0001 C CNN
	1    4850 4900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 63546B43
P 4850 5200
F 0 "#PWR?" H 4850 4950 50  0001 C CNN
F 1 "GND" H 4855 5027 50  0000 C CNN
F 2 "" H 4850 5200 50  0001 C CNN
F 3 "" H 4850 5200 50  0001 C CNN
	1    4850 5200
	1    0    0    -1  
$EndComp
$Comp
L Device:R R15
U 1 1 635470FA
P 5350 4750
F 0 "R15" H 5420 4796 50  0000 L CNN
F 1 "4.7k" H 5420 4705 50  0000 L CNN
F 2 "" V 5280 4750 50  0001 C CNN
F 3 "~" H 5350 4750 50  0001 C CNN
	1    5350 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	5150 4900 5350 4900
$Comp
L power:+9V #PWR?
U 1 1 63548522
P 5350 4550
F 0 "#PWR?" H 5350 4400 50  0001 C CNN
F 1 "+9V" H 5365 4723 50  0000 C CNN
F 2 "" H 5350 4550 50  0001 C CNN
F 3 "" H 5350 4550 50  0001 C CNN
	1    5350 4550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5350 4550 5350 4600
Wire Wire Line
	4050 1350 4050 1550
Text GLabel 5550 4900 2    50   Input ~ 0
PWM_out
Text GLabel 5850 3150 2    50   Input ~ 0
PI_compensator
Text GLabel 5800 1600 2    50   Input ~ 0
Triangle_wave
Wire Wire Line
	5350 4900 5550 4900
Connection ~ 5350 4900
Text GLabel 4550 5000 0    50   Input ~ 0
PI_compensator
Text GLabel 4550 4800 0    50   Input ~ 0
Triangle_wave
Wire Wire Line
	2150 3100 2400 3100
Wire Wire Line
	2400 3100 2400 3050
Connection ~ 2150 3100
Text GLabel 2800 3050 1    50   Input ~ 0
V_setpoint
Wire Wire Line
	2800 3050 2800 3150
Wire Wire Line
	2800 3150 2950 3150
$EndSCHEMATC
